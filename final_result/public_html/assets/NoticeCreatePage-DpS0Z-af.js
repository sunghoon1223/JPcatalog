import{j as e}from"./ui-vendor-D7YrltUJ.js";import{c as v,r as p}from"./react-vendor-XbLGo5ol.js";import{A as d}from"./AdminLayout-IQvitp-J.js";import{q as N,u as b,L as f,e as c,n as y,C,b as S,d as w,a as L,I as F,w as m,x as k}from"./index-iJ4ZFglL.js";import{L as l}from"./label-HICMNMR8.js";import{T as E}from"./textarea-Cxk_zgHe.js";import{S as _,a as A,b as I,c as P,d as o}from"./select-Dd79ptlA.js";import{C as T}from"./checkbox-C4Sv_fFD.js";import"./message-square-wSPTWZHd.js";import"./users-NOTXd2iJ.js";import"./index-BdQq_4o_.js";function O(){const a=v(),{user:x,loading:j}=N(),{t}=b(),[n,h]=p.useState(!1),[i,r]=p.useState({title:"",content:"",category:"general",is_pinned:!1}),g=async s=>{if(s.preventDefault(),!x){m.error(t("admin.notice.sessionExpired.body")),a("/admin/login");return}h(!0);try{await k.createNotice({...i,isPinned:i.is_pinned}),m.success(t("admin.notice.create.toast.success")),a("/admin/notices")}catch(u){console.error("Failed to create notice:",u),m.error(u.message||t("admin.notice.create.toast.error"))}finally{h(!1)}};return j?e.jsx(d,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(f,{className:"h-8 w-8 animate-spin text-blue-600"})})}):x?e.jsx(d,{children:e.jsxs("div",{className:"space-y-6 max-w-4xl",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>a("/admin/notices"),children:e.jsx(y,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:t("admin.notice.create.title")}),e.jsx("p",{className:"text-slate-600 mt-1",children:t("admin.notice.create.subtitle")})]})]}),e.jsxs(C,{children:[e.jsx(S,{children:e.jsx(w,{children:t("admin.notice.form.info")})}),e.jsx(L,{children:e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"title",children:t("admin.notice.form.title")}),e.jsx(F,{id:"title",value:i.title,onChange:s=>r({...i,title:s.target.value}),placeholder:t("admin.notice.form.titlePlaceholder"),required:!0,disabled:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"category",children:t("admin.notice.form.category")}),e.jsxs(_,{value:i.category,onValueChange:s=>r({...i,category:s}),disabled:n,children:[e.jsx(A,{children:e.jsx(I,{})}),e.jsxs(P,{children:[e.jsx(o,{value:"general",children:t("admin.notice.list.filter.general")}),e.jsx(o,{value:"공지",children:t("admin.notice.list.filter.notice")}),e.jsx(o,{value:"이벤트",children:t("admin.notice.list.filter.event")}),e.jsx(o,{value:"업데이트",children:t("admin.notice.list.filter.update")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"content",children:t("admin.notice.form.content")}),e.jsx(E,{id:"content",value:i.content,onChange:s=>r({...i,content:s.target.value}),placeholder:t("admin.notice.form.contentPlaceholder"),rows:12,required:!0,disabled:n,className:"font-mono text-sm"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("admin.notice.form.contentNote")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{id:"is_pinned",checked:i.is_pinned,onCheckedChange:s=>r({...i,is_pinned:s===!0}),disabled:n}),e.jsx(l,{htmlFor:"is_pinned",className:"cursor-pointer",children:t("admin.notice.form.pin")})]}),e.jsxs("div",{className:"flex gap-4 pt-4 border-t",children:[e.jsx(c,{type:"button",variant:"outline",onClick:()=>a("/admin/notices"),disabled:n,children:t("admin.notice.form.cancel")}),e.jsx(c,{type:"submit",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"mr-2 h-4 w-4 animate-spin"}),t("admin.notice.form.saving")]}):t("admin.notice.form.save")})]})]})})]})]})}):e.jsx(d,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:t("admin.notice.sessionExpired.title")}),e.jsx("p",{className:"text-muted-foreground",children:t("admin.notice.sessionExpired.body")}),e.jsx(c,{onClick:()=>a("/admin/login"),children:t("admin.notice.sessionExpired.cta")})]})})}export{O as default};
