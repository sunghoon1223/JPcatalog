var cs=Object.defineProperty;var os=(v,s,i)=>s in v?cs(v,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):v[s]=i;var me=(v,s,i)=>os(v,typeof s!="symbol"?s+"":s,i);import{u as De,U as ds,j as e,t as us,m as Re,w as ms,_ as hs}from"./ui-vendor-CPG2pbg2.js";import{c as X,t as w,u as xs,l as Ce,D as ye,m as Ne,n as ve,o as be,L as _,I as F,p as z,q as B,r as qe,s as Fe,v as Me,w as Le,x as $e,f as N,X as ze,T as oe,y as we,z as se,E as ge,b as he,C as q,d as V,e as Y,a as M,F as ps,H as ce,R as gs,J as je,U as fe,K as js,N as fs,O as ys,B as ee,Q as Ns,V as vs,W as Pe,Y as bs,Z as ws,_ as Q,$ as ks,a0 as Z,k as Ie,a1 as Ee,a2 as xe}from"./index-CSp23eor.js";import{r as o,N as Ss,L as _s}from"./react-vendor-CUUEtbzt.js";import{U as ke}from"./upload-Bp-XzxTY.js";import{S as ne}from"./square-pen-w9ZVmRCc.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=X("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=X("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=X("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=X("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=X("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=X("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=X("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=X("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Te="https://your-domain.com/api";class Is{constructor(){me(this,"token",null);me(this,"sessionId",null);this.token=localStorage.getItem("auth_token"),this.sessionId=localStorage.getItem("session_id")||this.generateSessionId(),localStorage.getItem("session_id")||localStorage.setItem("session_id",this.sessionId)}generateSessionId(){return"sess_"+Math.random().toString(36).substr(2,9)+Date.now().toString(36)}async request(s,i={}){const a=`${Te}${s}`,l={"Content-Type":"application/json",...i.headers};this.token&&(l.Authorization=`Bearer ${this.token}`);try{const t=await fetch(a,{...i,headers:l,credentials:"include"}),m=await t.json();if(!t.ok)throw new Error(m.error||`HTTP error! status: ${t.status}`);return m}catch(t){throw console.error("API request failed:",t),t}}async signUp(s,i,a,l){const t=await this.request("/auth/register.php",{method:"POST",body:JSON.stringify({email:s,password:i,full_name:a,phone:l})});return t.success&&t.data&&(this.token=t.data.token,localStorage.setItem("auth_token",this.token),localStorage.setItem("user",JSON.stringify(t.data.user))),t.data}async signIn(s,i){const a=await this.request("/auth/login.php",{method:"POST",body:JSON.stringify({email:s,password:i})});return a.success&&a.data&&(this.token=a.data.token,localStorage.setItem("auth_token",this.token),localStorage.setItem("user",JSON.stringify(a.data.user))),a.data}async signOut(){this.token=null,localStorage.removeItem("auth_token"),localStorage.removeItem("user")}async getCurrentUser(){if(!this.token)return null;try{return(await this.request("/auth/me.php")).data||null}catch(s){return console.error("Get current user failed:",s),this.signOut(),null}}async getProducts(s={}){const i=new URLSearchParams;return Object.entries(s).forEach(([l,t])=>{t!==void 0&&i.append(l,String(t))}),(await this.request(`/products/list.php?${i}`)).data}async getProduct(s){const a=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(s)?`id=${s}`:`slug=${s}`;return(await this.request(`/products/detail.php?${a}`)).data}async getCategories(){return(await this.request("/categories/list.php")).data}async getCartItems(){const s=new URLSearchParams;return this.sessionId&&s.append("session_id",this.sessionId),(await this.request(`/cart/list.php?${s}`)).data}async addToCart(s,i=1){return(await this.request("/cart/add.php",{method:"POST",body:JSON.stringify({product_id:s,quantity:i,session_id:this.sessionId})})).data}async updateCartItem(s,i){return(await this.request("/cart/update.php",{method:"POST",body:JSON.stringify({item_id:s,quantity:i,session_id:this.sessionId})})).data}async removeFromCart(s){await this.request("/cart/remove.php",{method:"POST",body:JSON.stringify({item_id:s,session_id:this.sessionId})})}async createOrder(s){return(await this.request("/orders/create.php",{method:"POST",body:JSON.stringify({...s,session_id:this.sessionId})})).data}async getOrders(){return(await this.request("/orders/list.php")).data}async getOrder(s){return(await this.request(`/orders/detail.php?id=${s}`)).data}async createProduct(s){return(await this.request("/products/create.php",{method:"POST",body:JSON.stringify(s)})).product}async updateProduct(s,i){return(await this.request("/products/update.php",{method:"PUT",body:JSON.stringify({id:s,...i})})).product}async deleteProduct(s){await this.request(`/products/delete.php?id=${s}`,{method:"DELETE"})}async toggleProductPublish(s){return(await this.request("/products/toggle-publish.php",{method:"POST",body:JSON.stringify({id:s})})).product}async getNotices(s){const i=new URLSearchParams;s!=null&&s.page&&i.append("page",s.page.toString()),s!=null&&s.limit&&i.append("limit",s.limit.toString()),s!=null&&s.category&&i.append("category",s.category),s!=null&&s.search&&i.append("search",s.search);const a=i.toString(),l=`/notices/list.php${a?"?"+a:""}`;return(await this.request(l)).data}async createNotice(s){return(await this.request("/notices/create.php",{method:"POST",body:JSON.stringify(s)})).notice}async updateNotice(s,i){return(await this.request("/notices/update.php",{method:"PUT",body:JSON.stringify({id:s,...i})})).notice}async deleteNotice(s){await this.request(`/notices/delete.php?id=${s}`,{method:"DELETE"})}async toggleNoticePin(s){return(await this.request("/notices/toggle-pin.php",{method:"POST",body:JSON.stringify({id:s})})).notice}async getUsers(s){const i=new URLSearchParams;s!=null&&s.page&&i.append("page",s.page.toString()),s!=null&&s.limit&&i.append("limit",s.limit.toString()),s!=null&&s.role&&i.append("role",s.role),s!=null&&s.search&&i.append("search",s.search);const a=i.toString(),l=`/users/list.php${a?"?"+a:""}`;return(await this.request(l)).data}async getAdminOrders(s){const i=new URLSearchParams;s!=null&&s.page&&i.append("page",s.page.toString()),s!=null&&s.limit&&i.append("limit",s.limit.toString()),s!=null&&s.status&&i.append("status",s.status),s!=null&&s.search&&i.append("search",s.search);const a=i.toString(),l=`/orders/list.php${a?"?"+a:""}`;return(await this.request(l)).data}async updateOrderStatus(s,i){return(await this.request("/orders/update-status.php",{method:"PUT",body:JSON.stringify({id:s,status:i})})).order}async uploadImage(s){const i=new FormData;i.append("image",s);const a=await fetch(`${Te}/upload/image.php`,{method:"POST",headers:{Authorization:`Bearer ${this.token}`},body:i}),l=await a.json();if(!a.ok)throw new Error(l.error||`HTTP error! status: ${a.status}`);return l.image}isAuthenticated(){return!!this.token}getStoredUser(){const s=localStorage.getItem("user");if(s)try{return JSON.parse(s)}catch{return null}return null}}const D=new Is;function Es(){const[v,s]=o.useState([]),[i,a]=o.useState(!1),[l,t]=o.useState(null),m=o.useCallback(async()=>{a(!0),t(null);try{const c=await D.getNotices();s(c.notices)}catch(c){console.error("Error loading notices:",c),t(c instanceof Error?c.message:"알 수 없는 오류가 발생했습니다."),w({title:"공지사항 로드 실패",description:"공지사항을 불러오는 중 오류가 발생했습니다.",variant:"destructive"})}finally{a(!1)}},[]),f=o.useCallback(async c=>{a(!0),t(null);try{const g=await D.createNotice({title:c.title,content:c.content,category:c.category,is_pinned:c.isPinned||!1});return s(p=>[g,...p]),w({title:"공지사항 생성 완료",description:"새로운 공지사항이 성공적으로 생성되었습니다."}),!0}catch(g){return console.error("Error creating notice:",g),t("공지사항 생성 중 오류가 발생했습니다."),w({title:"생성 실패",description:g instanceof Error?g.message:"공지사항 생성 중 오류가 발생했습니다.",variant:"destructive"}),!1}finally{a(!1)}},[]),C=o.useCallback(async(c,g)=>{a(!0),t(null);try{const p=await D.updateNotice(c,{title:g.title,content:g.content,category:g.category,is_pinned:g.isPinned||!1});return s(P=>P.map(A=>A.id===c?p:A)),w({title:"공지사항 수정 완료",description:"공지사항이 성공적으로 수정되었습니다."}),!0}catch(p){return console.error("Error updating notice:",p),t("공지사항 수정 중 오류가 발생했습니다."),w({title:"수정 실패",description:p instanceof Error?p.message:"공지사항 수정 중 오류가 발생했습니다.",variant:"destructive"}),!1}finally{a(!1)}},[]),k=o.useCallback(async c=>{a(!0),t(null);try{return await D.deleteNotice(c),s(g=>g.filter(p=>p.id!==c)),w({title:"공지사항 삭제 완료",description:"공지사항이 성공적으로 삭제되었습니다."}),!0}catch(g){return console.error("Error deleting notice:",g),t("공지사항 삭제 중 오류가 발생했습니다."),w({title:"삭제 실패",description:g instanceof Error?g.message:"공지사항 삭제 중 오류가 발생했습니다.",variant:"destructive"}),!1}finally{a(!1)}},[]),y=o.useCallback(async c=>{a(!0),t(null);try{const g=await D.toggleNoticePin(c);return s(p=>p.map(P=>P.id===c?g:P)),w({title:`공지사항 ${g.is_pinned?"고정":"고정 해제"} 완료`,description:`공지사항이 성공적으로 ${g.is_pinned?"고정":"고정 해제"}되었습니다.`}),!0}catch(g){return console.error("Error toggling pin:",g),t("고정 상태 변경 중 오류가 발생했습니다."),w({title:"상태 변경 실패",description:g instanceof Error?g.message:"고정 상태 변경 중 오류가 발생했습니다.",variant:"destructive"}),!1}finally{a(!1)}},[]),x=o.useCallback(()=>{t(null)},[]);return{notices:v,loading:i,error:l,loadNotices:m,createNotice:f,updateNotice:C,deleteNotice:k,togglePin:y,clearError:x}}function As(){const[v,s]=o.useState([]),[i,a]=o.useState(!1),l=o.useCallback(async()=>{a(!0);try{const y=await D.getProducts();s(y)}catch(y){console.error("Error loading products:",y),w({title:"제품 로드 실패",description:"제품 목록을 불러오는 중 오류가 발생했습니다.",variant:"destructive"})}finally{a(!1)}},[]),t=o.useCallback(async y=>{try{a(!0);const x=await D.createProduct(y);return s(c=>[x,...c]),w({title:"제품 생성 완료",description:"새 제품이 성공적으로 생성되었습니다."}),!0}catch(x){return console.error("Error creating product:",x),w({title:"제품 생성 실패",description:x instanceof Error?x.message:"제품 생성 중 오류가 발생했습니다.",variant:"destructive"}),!1}finally{a(!1)}},[]),m=o.useCallback(async(y,x)=>{try{a(!0);const c=await D.updateProduct(y,x);return s(g=>g.map(p=>p.id===y?c:p)),w({title:"제품 수정 완료",description:"제품이 성공적으로 수정되었습니다."}),!0}catch(c){return console.error("Error updating product:",c),w({title:"제품 수정 실패",description:c instanceof Error?c.message:"제품 수정 중 오류가 발생했습니다.",variant:"destructive"}),!1}finally{a(!1)}},[]),f=o.useCallback(async y=>{try{return a(!0),await D.deleteProduct(y),s(x=>x.filter(c=>c.id!==y)),w({title:"제품 삭제 완료",description:"제품이 성공적으로 삭제되었습니다."}),!0}catch(x){return console.error("Error deleting product:",x),w({title:"제품 삭제 실패",description:x instanceof Error?x.message:"제품 삭제 중 오류가 발생했습니다.",variant:"destructive"}),!1}finally{a(!1)}},[]),C=o.useCallback(async y=>{try{a(!0);const x=await D.toggleProductPublish(y);return s(c=>c.map(g=>g.id===y?x:g)),w({title:`제품 ${x.is_published?"발행":"발행 취소"} 완료`,description:`제품이 성공적으로 ${x.is_published?"발행":"발행 취소"}되었습니다.`}),!0}catch(x){return console.error("Error toggling publish status:",x),w({title:"상태 변경 실패",description:x instanceof Error?x.message:"제품 상태 변경 중 오류가 발생했습니다.",variant:"destructive"}),!1}finally{a(!1)}},[]),k=o.useCallback(y=>v.find(x=>x.id===y),[v]);return{products:v,loading:i,loadProducts:l,createProduct:t,updateProduct:m,deleteProduct:f,togglePublishStatus:C,getProductById:k}}var de="Switch",[Os,Qs]=us(de),[Us,Ts]=Os(de),Be=o.forwardRef((v,s)=>{const{__scopeSwitch:i,name:a,checked:l,defaultChecked:t,required:m,disabled:f,value:C="on",onCheckedChange:k,form:y,...x}=v,[c,g]=o.useState(null),p=De(s,$=>g($)),P=o.useRef(!1),A=c?y||!!c.closest("form"):!0,[O,L]=ds({prop:l,defaultProp:t??!1,onChange:k,caller:de});return e.jsxs(Us,{scope:i,checked:O,disabled:f,children:[e.jsx(Re.button,{type:"button",role:"switch","aria-checked":O,"aria-required":m,"data-state":Ke(O),"data-disabled":f?"":void 0,disabled:f,value:C,...x,ref:p,onClick:ms(v.onClick,$=>{L(J=>!J),A&&(P.current=$.isPropagationStopped(),P.current||$.stopPropagation())})}),A&&e.jsx(He,{control:c,bubbles:!P.current,name:a,value:C,checked:O,required:m,disabled:f,form:y,style:{transform:"translateX(-100%)"}})]})});Be.displayName=de;var Je="SwitchThumb",Ge=o.forwardRef((v,s)=>{const{__scopeSwitch:i,...a}=v,l=Ts(Je,i);return e.jsx(Re.span,{"data-state":Ke(l.checked),"data-disabled":l.disabled?"":void 0,...a,ref:s})});Ge.displayName=Je;var Ds="SwitchBubbleInput",He=o.forwardRef(({__scopeSwitch:v,control:s,checked:i,bubbles:a=!0,...l},t)=>{const m=o.useRef(null),f=De(m,t),C=xs(i),k=hs(s);return o.useEffect(()=>{const y=m.current;if(!y)return;const x=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(x,"checked").set;if(C!==i&&g){const p=new Event("click",{bubbles:a});g.call(y,i),y.dispatchEvent(p)}},[C,i,a]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...l,tabIndex:-1,ref:f,style:{...l.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});He.displayName=Ds;function Ke(v){return v?"checked":"unchecked"}var Ve=Be,Rs=Ge;const _e=o.forwardRef(({className:v,...s},i)=>e.jsx(Ve,{className:Ce("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",v),...s,ref:i,children:e.jsx(Rs,{className:Ce("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));_e.displayName=Ve.displayName;const qs=[{value:"제품",label:"제품"},{value:"공지",label:"공지"},{value:"사업",label:"사업"},{value:"시스템",label:"시스템"},{value:"인증",label:"인증"},{value:"기술",label:"기술"},{value:"행사",label:"행사"}];function Fs({isOpen:v,onClose:s,onSave:i,notice:a,loading:l=!1}){const[t,m]=o.useState({title:"",content:"",category:"공지",isPinned:!1,thumbnail:""}),[f,C]=o.useState({});o.useEffect(()=>{m(a?{title:a.title,content:a.content,category:a.category,isPinned:a.isPinned,thumbnail:a.thumbnail||""}:{title:"",content:"",category:"공지",isPinned:!1,thumbnail:""}),C({})},[a,v]);const k=()=>{const p={};return t.title.trim()||(p.title="제목을 입력해주세요."),t.content.trim()||(p.content="내용을 입력해주세요."),t.category||(p.category="카테고리를 선택해주세요."),C(p),Object.keys(p).length===0},y=async p=>{if(p.preventDefault(),!k())return;await i(t)&&s()},x=()=>{m({title:"",content:"",category:"공지",isPinned:!1,thumbnail:""}),C({}),s()},c=p=>{var A;const P=(A=p.target.files)==null?void 0:A[0];if(P){const O=URL.createObjectURL(P);m(L=>({...L,thumbnail:O}))}},g=()=>{m(p=>({...p,thumbnail:""}))};return e.jsx(ye,{open:v,onOpenChange:x,children:e.jsxs(Ne,{className:"sm:max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ve,{children:e.jsx(be,{children:a?"공지사항 수정":"새 공지사항 작성"})}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"title",children:"제목 *"}),e.jsx(F,{id:"title",value:t.title,onChange:p=>m(P=>({...P,title:p.target.value})),placeholder:"공지사항 제목을 입력하세요",disabled:l}),f.title&&e.jsx(z,{variant:"destructive",children:e.jsx(B,{children:f.title})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"category",children:"카테고리 *"}),e.jsxs(qe,{value:t.category,onValueChange:p=>m(P=>({...P,category:p})),disabled:l,children:[e.jsx(Fe,{children:e.jsx(Me,{placeholder:"카테고리 선택"})}),e.jsx(Le,{children:qs.map(p=>e.jsx($e,{value:p.value,children:p.label},p.value))})]}),f.category&&e.jsx(z,{variant:"destructive",children:e.jsx(B,{children:f.category})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"isPinned",children:"중요 공지"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{id:"isPinned",checked:t.isPinned,onCheckedChange:p=>m(P=>({...P,isPinned:p})),disabled:l}),e.jsx(_,{htmlFor:"isPinned",className:"text-sm text-muted-foreground",children:"상단에 고정 표시"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"thumbnail",children:"썸네일 이미지"}),e.jsx("div",{className:"space-y-3",children:t.thumbnail?e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:t.thumbnail,alt:"썸네일 미리보기",className:"w-32 h-24 object-cover rounded-lg border"}),e.jsx(N,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full p-0",onClick:g,disabled:l,children:e.jsx(ze,{className:"h-3 w-3"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6 text-center",children:[e.jsx(ke,{className:"mx-auto h-8 w-8 text-muted-foreground/50 mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"썸네일 이미지를 업로드하세요"}),e.jsx(F,{type:"file",accept:"image/*",onChange:c,disabled:l,className:"max-w-xs mx-auto"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"content",children:"내용 *"}),e.jsx(oe,{id:"content",value:t.content,onChange:p=>m(P=>({...P,content:p.target.value})),placeholder:"공지사항 내용을 입력하세요...",rows:10,disabled:l}),f.content&&e.jsx(z,{variant:"destructive",children:e.jsx(B,{children:f.content})})]}),e.jsxs(we,{children:[e.jsx(N,{type:"button",variant:"outline",onClick:x,disabled:l,children:"취소"}),e.jsx(N,{type:"submit",disabled:l,className:"bg-amber-600 hover:bg-amber-700",children:l?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"w-4 h-4 mr-2 animate-spin"}),"저장 중..."]}):a?"수정":"작성"})]})]})]})})}const Ms=[{value:"cat_agv",label:"AGV 캐스터"},{value:"cat_industrial",label:"산업용 캐스터"},{value:"cat_heavy_duty",label:"헤비듀티 캐스터"},{value:"cat_light_medium",label:"라이트/미디엄 캐스터"},{value:"cat_specialty",label:"특수 캐스터"},{value:"cat_polyurethane",label:"폴리우레탄 휠"},{value:"cat_rubber",label:"러버 휠"},{value:"cat_mecanum",label:"메카넘 휠"}];function Ls({isOpen:v,onClose:s,onSave:i,product:a,loading:l=!1}){const[t,m]=o.useState({name:"",description:"",price:0,sku:"",stock_quantity:0,manufacturer:"",category_id:"cat_agv",main_image_url:"",image_urls:[],features:{},is_published:!0}),[f,C]=o.useState({}),[k,y]=o.useState(""),[x,c]=o.useState(!1),g=o.useRef(null),p=o.useRef(null);o.useEffect(()=>{m(a?{name:a.name,description:a.description,price:a.price,sku:a.sku,stock_quantity:a.stock_quantity,manufacturer:a.manufacturer,category_id:a.category_id,main_image_url:a.main_image_url,image_urls:a.image_urls,features:a.features,is_published:a.is_published}:{name:"",description:"",price:0,sku:"",stock_quantity:0,manufacturer:"",category_id:"cat_agv",main_image_url:"",image_urls:[],features:{},is_published:!0}),C({}),y("")},[a,v]);const P=()=>{const r={};return t.name.trim()||(r.name="제품명을 입력해주세요."),t.description.trim()||(r.description="제품 설명을 입력해주세요."),t.price<=0&&(r.price="올바른 가격을 입력해주세요."),t.sku.trim()||(r.sku="SKU를 입력해주세요."),t.stock_quantity<0&&(r.stock_quantity="재고 수량은 0 이상이어야 합니다."),t.manufacturer.trim()||(r.manufacturer="제조사를 입력해주세요."),t.category_id||(r.category_id="카테고리를 선택해주세요."),C(r),Object.keys(r).length===0},A=async r=>{if(r.preventDefault(),!P())return;await i(t)&&s()},O=()=>{m({name:"",description:"",price:0,sku:"",stock_quantity:0,manufacturer:"",category_id:"cat_agv",main_image_url:"",image_urls:[],features:{},is_published:!0}),C({}),y(""),s()},L=()=>{k.trim()&&(m(r=>({...r,image_urls:[...r.image_urls,k.trim()]})),y(""))},$=r=>{m(d=>({...d,image_urls:d.image_urls.filter((b,S)=>S!==r)}))},J=r=>{m(d=>({...d,main_image_url:r}))},K=async r=>{var b;const d=(b=r.target.files)==null?void 0:b[0];if(d){if(d.size>5*1024*1024){w({title:"파일 크기 초과",description:"이미지 파일은 5MB 이하여야 합니다.",variant:"destructive"});return}c(!0);try{const S=await D.uploadImage(d);m(U=>({...U,main_image_url:S.url})),w({title:"이미지 업로드 성공",description:"메인 이미지가 성공적으로 업로드되었습니다."})}catch(S){console.error("Image upload failed:",S),w({title:"업로드 실패",description:S instanceof Error?S.message:"이미지 업로드에 실패했습니다.",variant:"destructive"})}finally{c(!1)}}},h=async r=>{var b;const d=(b=r.target.files)==null?void 0:b[0];if(d){if(d.size>5*1024*1024){w({title:"파일 크기 초과",description:"이미지 파일은 5MB 이하여야 합니다.",variant:"destructive"});return}c(!0);try{const S=await D.uploadImage(d);m(U=>({...U,image_urls:[...U.image_urls,S.url]})),w({title:"이미지 업로드 성공",description:"추가 이미지가 성공적으로 업로드되었습니다."}),g.current&&(g.current.value="")}catch(S){console.error("Image upload failed:",S),w({title:"업로드 실패",description:S instanceof Error?S.message:"이미지 업로드에 실패했습니다.",variant:"destructive"})}finally{c(!1)}}};return e.jsx(ye,{open:v,onOpenChange:O,children:e.jsxs(Ne,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ve,{children:e.jsx(be,{children:a?"제품 수정":"새 제품 추가"})}),e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"name",children:"제품명 *"}),e.jsx(F,{id:"name",value:t.name,onChange:r=>m(d=>({...d,name:r.target.value})),placeholder:"제품명을 입력하세요",disabled:l}),f.name&&e.jsx(z,{variant:"destructive",children:e.jsx(B,{children:f.name})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"sku",children:"SKU *"}),e.jsx(F,{id:"sku",value:t.sku,onChange:r=>m(d=>({...d,sku:r.target.value})),placeholder:"SKU를 입력하세요",disabled:l}),f.sku&&e.jsx(z,{variant:"destructive",children:e.jsx(B,{children:f.sku})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"description",children:"제품 설명 *"}),e.jsx(oe,{id:"description",value:t.description,onChange:r=>m(d=>({...d,description:r.target.value})),placeholder:"제품 설명을 입력하세요...",rows:4,disabled:l}),f.description&&e.jsx(z,{variant:"destructive",children:e.jsx(B,{children:f.description})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"price",children:"가격 *"}),e.jsx(F,{id:"price",type:"number",value:t.price,onChange:r=>m(d=>({...d,price:Number(r.target.value)})),placeholder:"가격",disabled:l}),f.price&&e.jsx(z,{variant:"destructive",children:e.jsx(B,{children:f.price})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"stock_quantity",children:"재고 수량 *"}),e.jsx(F,{id:"stock_quantity",type:"number",value:t.stock_quantity,onChange:r=>m(d=>({...d,stock_quantity:Number(r.target.value)})),placeholder:"재고 수량",disabled:l}),f.stock_quantity&&e.jsx(z,{variant:"destructive",children:e.jsx(B,{children:f.stock_quantity})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"category_id",children:"카테고리 *"}),e.jsxs(qe,{value:t.category_id,onValueChange:r=>m(d=>({...d,category_id:r})),disabled:l,children:[e.jsx(Fe,{children:e.jsx(Me,{placeholder:"카테고리 선택"})}),e.jsx(Le,{children:Ms.map(r=>e.jsx($e,{value:r.value,children:r.label},r.value))})]}),f.category_id&&e.jsx(z,{variant:"destructive",children:e.jsx(B,{children:f.category_id})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"manufacturer",children:"제조사 *"}),e.jsx(F,{id:"manufacturer",value:t.manufacturer,onChange:r=>m(d=>({...d,manufacturer:r.target.value})),placeholder:"제조사를 입력하세요",disabled:l}),f.manufacturer&&e.jsx(z,{variant:"destructive",children:e.jsx(B,{children:f.manufacturer})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"main_image_url",children:"메인 이미지"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{id:"main_image_url",value:t.main_image_url,onChange:r=>m(d=>({...d,main_image_url:r.target.value})),placeholder:"메인 이미지 URL을 입력하거나 파일을 업로드하세요",disabled:l||x,className:"flex-1"}),e.jsx("input",{type:"file",ref:p,onChange:K,accept:"image/*",className:"hidden"}),e.jsx(N,{type:"button",variant:"outline",size:"sm",onClick:()=>{var r;return(r=p.current)==null?void 0:r.click()},disabled:l||x,className:"px-3",children:x?e.jsx(se,{className:"w-4 h-4 animate-spin"}):e.jsx(ke,{className:"w-4 h-4"})})]}),t.main_image_url&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:t.main_image_url,alt:"메인 이미지 미리보기",className:"w-32 h-24 object-cover rounded border"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"추가 이미지"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{value:k,onChange:r=>y(r.target.value),placeholder:"이미지 URL을 입력하거나 파일을 업로드하세요",disabled:l||x,className:"flex-1"}),e.jsx("input",{type:"file",ref:g,onChange:h,accept:"image/*",className:"hidden"}),e.jsx(N,{type:"button",variant:"outline",size:"sm",onClick:()=>{var r;return(r=g.current)==null?void 0:r.click()},disabled:l||x,className:"px-3",children:x?e.jsx(se,{className:"w-4 h-4 animate-spin"}):e.jsx(Se,{className:"w-4 h-4"})}),e.jsx(N,{type:"button",onClick:L,disabled:l||x||!k.trim(),size:"sm",children:e.jsx(ge,{className:"w-4 h-4"})})]}),t.image_urls.length>0&&e.jsx("div",{className:"space-y-2",children:t.image_urls.map((r,d)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[e.jsx("img",{src:r,alt:`이미지 ${d+1}`,className:"w-16 h-12 object-cover rounded"}),e.jsx("span",{className:"flex-1 text-sm truncate",children:r}),e.jsx(N,{type:"button",variant:"outline",size:"sm",onClick:()=>J(r),disabled:l,children:"메인으로"}),e.jsx(N,{type:"button",variant:"destructive",size:"sm",onClick:()=>$(d),disabled:l,children:e.jsx(ze,{className:"w-4 h-4"})})]},d))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"is_published",children:"발행 상태"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{id:"is_published",checked:t.is_published,onCheckedChange:r=>m(d=>({...d,is_published:r})),disabled:l}),e.jsx(_,{htmlFor:"is_published",className:"text-sm text-muted-foreground",children:t.is_published?"발행됨":"초안"})]})]}),e.jsxs(we,{children:[e.jsx(N,{type:"button",variant:"outline",onClick:O,disabled:l||x,children:"취소"}),e.jsx(N,{type:"submit",disabled:l||x,className:"bg-amber-600 hover:bg-amber-700",children:l||x?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"w-4 h-4 mr-2 animate-spin"}),x?"업로드 중...":"저장 중..."]}):a?"수정":"생성"})]})]})]})})}const pe=[{value:"agv",label:"AGV 캐스터",category:"cat_agv"},{value:"industrial",label:"산업용 캐스터",category:"cat_industrial"},{value:"heavy_duty",label:"헤비듀티 캐스터",category:"cat_heavy_duty"},{value:"standard",label:"일반 캐스터",category:"cat_light_medium"},{value:"custom",label:"특수 캐스터",category:"cat_specialty"}];function $s({isOpen:v,onClose:s,onProductCreated:i}){const[a,l]=o.useState("input"),[t,m]=o.useState({productName:"",basicDescription:"",productType:"standard",keyFeatures:[""]}),[f,C]=o.useState([]),[k,y]=o.useState(null),[x,c]=o.useState(!1),g=o.useRef(null),p=o.useRef(null),P=()=>{l("input"),m({productName:"",basicDescription:"",productType:"standard",keyFeatures:[""]}),C([]),y(null),c(!1)},A=()=>{P(),s()},O=()=>{m(u=>({...u,keyFeatures:[...u.keyFeatures,""]}))},L=u=>{m(j=>({...j,keyFeatures:j.keyFeatures.filter((E,I)=>I!==u)}))},$=(u,j)=>{m(E=>({...E,keyFeatures:E.keyFeatures.map((I,T)=>T===u?j:I)}))},J=u=>{var E;const j=(E=u.target.files)==null?void 0:E[0];if(j){if(j.size>5*1024*1024){w({title:"파일 크기 초과",description:"이미지 파일은 5MB 이하여야 합니다.",variant:"destructive"});return}m(I=>({...I,mainImage:j}))}},K=u=>{const j=Array.from(u.target.files||[]);if(j.length>0){const E=j.filter(I=>I.size>5242880?(w({title:"파일 크기 초과",description:`${I.name}은 5MB를 초과합니다.`,variant:"destructive"}),!1):!0);m(I=>({...I,additionalImages:E}))}},h=()=>{const u=pe.find(j=>j.value===t.productType);return`
당신은 JP CASTER의 전문 제품 기획자입니다. 다음 최소 정보를 바탕으로 완전한 제품 상세 정보를 생성해주세요:

**입력 정보:**
- 제품명: ${t.productName}
- 기본 설명: ${t.basicDescription}
- 제품 타입: ${u==null?void 0:u.label}
- 주요 특징: ${t.keyFeatures.filter(j=>j.trim()).join(", ")}
- 목표 가격대: ${t.targetPrice?`₩${t.targetPrice.toLocaleString()}`:"미정"}

**생성해야 할 내용:**
1. **완전한 제품 설명** (300-500자, 기술적 상세 포함)
2. **SKU 코드** (JP-YYYYMMDD-XXX 형식)
3. **정확한 가격** (시장 조사 기반)
4. **재고 수량** (적정 초기 재고)
5. **제조사 정보** (JP Caster 또는 파트너사)
6. **상세 특징** (JSON 객체 형태, 최소 5개 항목)
7. **적용 분야** (어떤 산업/용도에 사용되는지)
8. **기술 사양** (크기, 하중, 재질 등)

**JSON 응답 형식:**
\`\`\`json
{
  "name": "완전한 제품명",
  "description": "상세한 제품 설명",
  "sku": "SKU 코드",
  "price": 숫자,
  "stock_quantity": 숫자,
  "manufacturer": "제조사명",
  "features": {
    "하중_용량": "값",
    "휠_재질": "값",
    "베어링_타입": "값",
    "적용_분야": "값",
    "특수_기능": "값"
  },
  "suggested_categories": ["추천 카테고리 ID"],
  "seo_keywords": ["SEO 키워드들"],
  "marketing_points": ["마케팅 포인트들"]
}
\`\`\`

전문적이고 정확한 정보를 제공해주세요.
`},r=(u,j)=>{C(E=>E.map(I=>I.id===u?{...I,...j}:I))},d=async(u,j)=>{throw new Error("Gemini API 키가 설정되지 않았습니다.")},b=u=>new Promise((j,E)=>{const I=new FileReader;I.onload=()=>{const H=I.result.split(",")[1];j(H)},I.onerror=E,I.readAsDataURL(u)}),S=async()=>{if(!t.productName.trim()||!t.basicDescription.trim()){w({title:"정보 부족",description:"제품명과 기본 설명은 필수입니다.",variant:"destructive"});return}c(!0),l("generating"),C([{id:"analyze",title:"제품 정보 분석",status:"processing",description:"입력된 정보를 AI가 분석하고 있습니다..."},{id:"generate",title:"상세 정보 생성",status:"pending",description:"AI가 완전한 제품 정보를 생성합니다."},{id:"upload",title:"이미지 업로드",status:"pending",description:"제품 이미지를 서버에 업로드합니다."},{id:"validate",title:"정보 검증",status:"pending",description:"생성된 정보의 품질을 검증합니다."}]);try{r("analyze",{status:"processing"});let j;t.mainImage&&(j=await b(t.mainImage));const E=h(),I=await d(E,j);r("analyze",{status:"completed",result:"AI 분석 완료"}),r("generate",{status:"processing"});let T;try{const R=I.match(/```json\s*([\s\S]*?)\s*```/);R?T=JSON.parse(R[1]):T=JSON.parse(I)}catch{throw new Error("AI 응답을 파싱할 수 없습니다: "+I)}r("generate",{status:"completed",result:T}),r("upload",{status:"processing"});let H=[];if(t.mainImage){const R=await D.uploadImage(t.mainImage);H.push(R.url)}if(t.additionalImages&&t.additionalImages.length>0)for(const R of t.additionalImages){const ue=await D.uploadImage(R);H.push(ue.url)}r("upload",{status:"completed",result:H}),r("validate",{status:"processing"});const te=pe.find(R=>R.value===t.productType),ae={name:T.name||t.productName,description:T.description||t.basicDescription,price:T.price||t.targetPrice||1e5,sku:T.sku||`JP-${Date.now()}`,stock_quantity:T.stock_quantity||50,manufacturer:T.manufacturer||"JP Caster",category_id:(te==null?void 0:te.category)||"cat_agv",main_image_url:H[0]||"",image_urls:H.slice(1)||[],features:T.features||{},is_published:!1};y(ae),r("validate",{status:"completed",result:"검증 완료"}),l("review"),w({title:"AI 제품 생성 완료!",description:"생성된 제품 정보를 검토해주세요."})}catch(j){console.error("Generation error:",j);const E=f.find(I=>I.status==="processing");E&&r(E.id,{status:"error",description:j instanceof Error?j.message:"알 수 없는 오류가 발생했습니다."}),w({title:"생성 실패",description:j instanceof Error?j.message:"제품 생성 중 오류가 발생했습니다.",variant:"destructive"})}finally{c(!1)}},U=async()=>{if(k)try{c(!0),await D.createProduct(k),l("completed"),i(),w({title:"제품 생성 완료!",description:"새로운 제품이 성공적으로 생성되었습니다."})}catch(u){console.error("Product creation error:",u),w({title:"제품 생성 실패",description:u instanceof Error?u.message:"제품 생성 중 오류가 발생했습니다.",variant:"destructive"})}finally{c(!1)}},W=u=>{switch(u){case"completed":return e.jsx(he,{className:"w-5 h-5 text-green-500"});case"processing":return e.jsx(se,{className:"w-5 h-5 text-blue-500 animate-spin"});case"error":return e.jsx(ps,{className:"w-5 h-5 text-red-500"});default:return e.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 rounded-full"})}};return e.jsx(ye,{open:v,onOpenChange:A,children:e.jsxs(Ne,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(ve,{children:e.jsxs(be,{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5 text-amber-600"}),"AI 자동 제품 생성기"]})}),a==="input"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(z,{children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsx(B,{children:"최소한의 정보만 입력하면 AI가 완전한 제품 페이지를 자동으로 생성합니다."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"productName",children:"제품명 *"}),e.jsx(F,{id:"productName",value:t.productName,onChange:u=>m(j=>({...j,productName:u.target.value})),placeholder:"예: AGV 전용 캐스터 75mm"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"productType",children:"제품 타입 *"}),e.jsx("select",{id:"productType",value:t.productType,onChange:u=>m(j=>({...j,productType:u.target.value})),className:"w-full p-2 border border-gray-300 rounded",children:pe.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"basicDescription",children:"기본 설명 *"}),e.jsx(oe,{id:"basicDescription",value:t.basicDescription,onChange:u=>m(j=>({...j,basicDescription:u.target.value})),placeholder:"제품의 주요 용도와 특징을 간단히 설명해주세요...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"targetPrice",children:"목표 가격 (선택사항)"}),e.jsx(F,{id:"targetPrice",type:"number",value:t.targetPrice||"",onChange:u=>m(j=>({...j,targetPrice:Number(u.target.value)||void 0})),placeholder:"예: 150000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"주요 특징"}),t.keyFeatures.map((u,j)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{value:u,onChange:E=>$(j,E.target.value),placeholder:"예: 고하중 지지, 정밀 제어 등"}),t.keyFeatures.length>1&&e.jsx(N,{type:"button",variant:"outline",size:"sm",onClick:()=>L(j),children:"제거"})]},j)),e.jsx(N,{type:"button",variant:"outline",size:"sm",onClick:O,children:"특징 추가"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"메인 이미지 (선택사항)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{type:"button",variant:"outline",onClick:()=>{var u;return(u=g.current)==null?void 0:u.click()},className:"flex-1",children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),t.mainImage?t.mainImage.name:"이미지 선택"]}),e.jsx("input",{type:"file",ref:g,onChange:J,accept:"image/*",className:"hidden"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"추가 이미지 (선택사항)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{type:"button",variant:"outline",onClick:()=>{var u;return(u=p.current)==null?void 0:u.click()},className:"flex-1",children:[e.jsx(ke,{className:"w-4 h-4 mr-2"}),t.additionalImages?`${t.additionalImages.length}개 선택됨`:"이미지 선택"]}),e.jsx("input",{type:"file",ref:p,onChange:K,accept:"image/*",multiple:!0,className:"hidden"})]})]})]})]}),a==="generating"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(ie,{className:"w-12 h-12 text-amber-600 mx-auto mb-4 animate-pulse"}),e.jsx("h3",{className:"text-lg font-semibold",children:"AI가 제품을 생성하고 있습니다..."}),e.jsx("p",{className:"text-muted-foreground",children:"잠시만 기다려주세요."})]}),e.jsx("div",{className:"space-y-3",children:f.map(u=>e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded",children:[W(u.status),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:u.title}),e.jsx("div",{className:"text-sm text-muted-foreground",children:u.description})]})]},u.id))})]}),a==="review"&&k&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(z,{children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx(B,{children:"AI가 생성한 제품 정보를 검토하고 확인해주세요."})]}),e.jsxs(q,{children:[e.jsx(V,{children:e.jsx(Y,{children:k.name})}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_,{className:"font-semibold",children:"설명"}),e.jsx("p",{className:"text-sm mt-1",children:k.description})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{className:"font-semibold",children:"가격"}),e.jsxs("p",{className:"text-sm",children:["₩",k.price.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx(_,{className:"font-semibold",children:"SKU"}),e.jsx("p",{className:"text-sm",children:k.sku})]}),e.jsxs("div",{children:[e.jsx(_,{className:"font-semibold",children:"재고"}),e.jsxs("p",{className:"text-sm",children:[k.stock_quantity,"개"]})]}),e.jsxs("div",{children:[e.jsx(_,{className:"font-semibold",children:"제조사"}),e.jsx("p",{className:"text-sm",children:k.manufacturer})]})]}),Object.keys(k.features).length>0&&e.jsxs("div",{children:[e.jsx(_,{className:"font-semibold",children:"주요 특징"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-1",children:Object.entries(k.features).map(([u,j])=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"font-medium",children:[u,":"]})," ",j]},u))})]}),k.main_image_url&&e.jsxs("div",{children:[e.jsx(_,{className:"font-semibold",children:"메인 이미지"}),e.jsx("img",{src:k.main_image_url,alt:"생성된 제품 이미지",className:"w-32 h-24 object-cover rounded border mt-1"})]})]})]})]}),a==="completed"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(he,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"제품 생성 완료!"}),e.jsxs("p",{className:"text-muted-foreground",children:["새로운 제품이 성공적으로 생성되었습니다.",e.jsx("br",{}),"제품 관리 탭에서 확인하실 수 있습니다."]})]}),e.jsxs(we,{children:[a==="input"&&e.jsxs(e.Fragment,{children:[e.jsx(N,{variant:"outline",onClick:A,children:"취소"}),e.jsxs(N,{onClick:S,disabled:!t.productName.trim()||!t.basicDescription.trim(),className:"bg-amber-600 hover:bg-amber-700",children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"AI 생성 시작"]})]}),a==="review"&&e.jsxs(e.Fragment,{children:[e.jsx(N,{variant:"outline",onClick:()=>l("input"),children:"다시 생성"}),e.jsx(N,{onClick:U,disabled:x,className:"bg-green-600 hover:bg-green-700",children:x?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"w-4 h-4 mr-2 animate-spin"}),"생성 중..."]}):"제품 생성 확인"})]}),a==="completed"&&e.jsx(N,{onClick:A,className:"w-full",children:"완료"})]})]})})}const zs=()=>(console.warn("⚠️ Gemini API 키가 설정되지 않았습니다. 환경변수를 확인해주세요."),null),Bs=zs(),Js=[{icon:je,title:"신제품 생성",description:"이미지와 간단한 설명으로 제품 페이지 생성",action:"product-generation"},{icon:le,title:"매출 분석 팁",description:"매출 향상을 위한 전략 및 분석 방법",action:"sales-tips"},{icon:fe,title:"고객 관리 가이드",description:"효과적인 고객 관리 및 서비스 개선 방법",action:"customer-management"},{icon:js,title:"사이트 운영 팁",description:"이커머스 사이트 운영 및 최적화 조언",action:"site-management"}];function Gs({className:v}){const[s,i]=o.useState([{id:"1",content:`안녕하세요! JPCaster 관리자 AI 어시스턴트입니다.

저는 다음과 같은 업무를 도와드릴 수 있습니다:

📦 **제품 페이지 자동 생성**: 이미지와 간단한 설명만으로 완성도 높은 제품 페이지 생성
📊 **이커머스 운영 팁**: 매출 증대, 고객 관리, 사이트 최적화 등 전문적인 조언
🎯 **맞춤형 관리 도구**: 재고 관리, 주문 처리, 마케팅 전략 등 실무 가이드

어떤 도움이 필요하신가요?`,isUser:!1,timestamp:new Date,type:"text"}]),[a,l]=o.useState(""),[t,m]=o.useState(!1),[f,C]=o.useState(null),[k,y]=o.useState(null),x=o.useRef(null),c=o.useRef(null);o.useEffect(()=>{if(x.current){const h=x.current.querySelector("[data-radix-scroll-area-viewport]");h&&(h.scrollTop=h.scrollHeight)}},[s]);const g=()=>`
당신은 JPCaster 이커머스 사이트의 전문 관리자 AI 어시스턴트입니다. 다음 역할을 수행해주세요:

**주요 기능:**
1. **제품 페이지 자동 생성**: 
   - 이미지와 간단한 설명을 받아 완성도 높은 제품 정보 생성
   - 제품명, 상세 설명, 주요 특징, 기술 사양, 가격 추천 등
   - SEO 최적화된 제품 설명 작성

2. **이커머스 운영 조언**:
   - 매출 증대 전략 및 마케팅 팁
   - 고객 관리 및 서비스 개선 방법
   - 재고 관리 및 주문 처리 최적화
   - 사이트 성능 및 UX 개선 가이드

3. **실무 지원**:
   - 카테고리 관리 및 상품 분류 조언
   - 가격 전략 및 프로모션 계획
   - 고객 문의 대응 가이드
   - 경쟁사 분석 및 시장 동향

**회사 정보:**
- JPCaster: 산업용 캐스터 전문 제조업체
- 주요 제품: AGV 캐스터, 산업용 캐스터, 폴리우레탄 휠, 러버 휠, 구동 모듈
- 고객층: B2B 제조업체, 물류 회사, 자동화 솔루션 업체

**응답 스타일:**
- 전문적이고 실무적인 조언 제공
- 구체적이고 실행 가능한 솔루션 제시
- 단계별 가이드 및 체크리스트 형태로 정리
- 이커머스 업계 트렌드 및 베스트 프랙티스 반영

**제품 생성 시 포함 요소:**
- 제품명 (한국어/영어)
- 카테고리 분류
- 상세 설명 (기능, 용도, 장점)
- 주요 특징 (5-7개 핵심 포인트)
- 기술 사양 (크기, 하중, 재질 등)
- 적용 분야 및 호환성
- 가격 범위 추천
- SEO 키워드 제안

한국어로 응답하되, 전문적이고 신뢰할 수 있는 톤을 유지해주세요.
`,p=async(h,r)=>{try{const d=[{text:g()+`

관리자 요청: `+h}];r&&d.push({inline_data:{mime_type:"image/jpeg",data:r}});const b=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${Bs}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:d}],generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048},safetySettings:[{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]})});if(!b.ok)throw new Error(`Gemini API Error: ${b.status}`);const S=await b.json();if(S.candidates&&S.candidates[0]&&S.candidates[0].content)return S.candidates[0].content.parts[0].text;throw new Error("Invalid response format from Gemini API")}catch(d){return console.error("Gemini API Error:",d),"죄송합니다. 일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요. 문제가 지속되면 시스템 관리자에게 문의해주세요."}},P=h=>{var d;const r=(d=h.target.files)==null?void 0:d[0];if(r){if(r.size>5*1024*1024){w({title:"파일 크기 초과",description:"이미지 파일은 5MB 이하여야 합니다.",variant:"destructive"});return}C(r);const b=new FileReader;b.onload=S=>{var U;y((U=S.target)==null?void 0:U.result)},b.readAsDataURL(r)}},A=h=>new Promise((r,d)=>{const b=new FileReader;b.onload=()=>{const U=b.result.split(",")[1];r(U)},b.onerror=d,b.readAsDataURL(h)}),O=async()=>{if(!a.trim()&&!f||t)return;const h=a.trim()||"이미지를 분석해서 제품 정보를 생성해주세요.";l(""),m(!0);const r={id:Date.now().toString(),content:h+(f?`

[첨부된 이미지 분석 요청]`:""),isUser:!0,timestamp:new Date};i(b=>[...b,r]);const d={id:"typing",content:"",isUser:!1,timestamp:new Date,typing:!0};i(b=>[...b,d]);try{let b;f&&(b=await A(f));const S=await p(h,b);i(U=>U.filter(W=>W.id!=="typing").concat({id:(Date.now()+1).toString(),content:S,isUser:!1,timestamp:new Date,type:f?"product-generation":"text"})),C(null),y(null),c.current&&(c.current.value="")}catch(b){console.error("Error sending message:",b),i(S=>S.filter(U=>U.id!=="typing").concat({id:(Date.now()+1).toString(),content:"죄송합니다. 메시지 전송 중 오류가 발생했습니다. 다시 시도해주세요.",isUser:!1,timestamp:new Date})),w({title:"메시지 전송 실패",description:"일시적인 오류가 발생했습니다. 다시 시도해주세요.",variant:"destructive"})}finally{m(!1)}},L=async h=>{let r="";switch(h){case"product-generation":r="제품 이미지를 업로드하고 간단한 설명을 입력하면, 완성도 높은 제품 페이지를 자동으로 생성해드립니다. 어떤 제품의 페이지를 만들고 싶으신가요?";break;case"sales-tips":r=`매출 향상을 위한 전략을 알려드리겠습니다:

1. **상품 분석**: 인기 상품과 저조한 상품을 파악하여 재고 관리 최적화
2. **가격 전략**: 경쟁사 분석을 통한 적정 가격 설정
3. **마케팅**: 타겟 고객별 맞춤형 프로모션 계획
4. **고객 유지**: 리뷰 관리 및 애프터서비스 강화

구체적으로 어떤 부분에 대해 더 자세히 알고 싶으신가요?`;break;case"customer-management":r=`효과적인 고객 관리 방법을 안내해드리겠습니다:

1. **고객 분류**: VIP, 일반, 신규 고객별 차별화된 서비스
2. **문의 대응**: 신속하고 정확한 답변을 위한 FAQ 및 템플릿 구축
3. **만족도 향상**: 정기적인 피드백 수집 및 개선사항 반영
4. **재구매 유도**: 개인화된 추천 상품 및 할인 혜택 제공

어떤 고객 관리 영역에 집중하고 싶으신가요?`;break;case"site-management":r=`이커머스 사이트 운영 최적화 가이드:

1. **성능 최적화**: 페이지 로딩 속도 개선 및 모바일 최적화
2. **SEO 향상**: 검색엔진 최적화를 통한 자연 유입 증대
3. **UI/UX 개선**: 사용자 경험 향상을 위한 인터페이스 개선
4. **보안 강화**: 고객 정보 보호 및 결제 시스템 안전성 확보

특별히 개선하고 싶은 영역이 있으신가요?`;break}const d={id:Date.now().toString(),content:r,isUser:!1,timestamp:new Date,type:"tips"};i(b=>[...b,d])},$=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),O())},J=()=>{i([{id:"1",content:`안녕하세요! JPCaster 관리자 AI 어시스턴트입니다.

저는 다음과 같은 업무를 도와드릴 수 있습니다:

📦 **제품 페이지 자동 생성**: 이미지와 간단한 설명만으로 완성도 높은 제품 페이지 생성
📊 **이커머스 운영 팁**: 매출 증대, 고객 관리, 사이트 최적화 등 전문적인 조언
🎯 **맞춤형 관리 도구**: 재고 관리, 주문 처리, 마케팅 전략 등 실무 가이드

어떤 도움이 필요하신가요?`,isUser:!1,timestamp:new Date,type:"text"}]),C(null),y(null),c.current&&(c.current.value=""),w({title:"대화 내역 삭제",description:"새로운 세션을 시작합니다."})},K=h=>h.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:`h-full flex flex-col ${v}`,children:[e.jsx("div",{className:"flex-shrink-0 p-4 border-b bg-gradient-to-r from-amber-50 to-yellow-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 bg-amber-500 rounded-full flex items-center justify-center",children:e.jsx(ce,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"AI 관리자 어시스턴트"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"제품 생성 및 운영 최적화 도우미"})]})]}),e.jsx(N,{variant:"ghost",size:"icon",onClick:J,title:"대화 내역 삭제",children:e.jsx(gs,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"flex-shrink-0 p-4 border-b bg-white",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Js.map((h,r)=>{const d=h.icon;return e.jsxs(N,{variant:"outline",className:"h-auto p-3 flex flex-col gap-2 hover:bg-amber-50",onClick:()=>L(h.action),children:[e.jsx(d,{className:"h-5 w-5 text-amber-600"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-medium",children:h.title}),e.jsx("div",{className:"text-xs text-muted-foreground hidden md:block",children:h.description})]})]},r)})})}),e.jsx(fs,{className:"flex-1 p-4",ref:x,children:e.jsx("div",{className:"space-y-4",children:s.map(h=>e.jsx("div",{className:`flex ${h.isUser?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`flex gap-3 max-w-[85%] ${h.isUser?"flex-row-reverse":"flex-row"}`,children:[e.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center flex-shrink-0 ${h.isUser?"bg-blue-500":h.type==="product-generation"?"bg-green-500":h.type==="tips"?"bg-amber-500":"bg-gray-500"}`,children:h.isUser?e.jsx(ys,{className:"h-4 w-4 text-white"}):e.jsx(ce,{className:"h-4 w-4 text-white"})}),e.jsx(q,{className:`${h.isUser?"bg-blue-500 text-white":"bg-white"}`,children:e.jsx(M,{className:"p-3",children:h.typing?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{className:"text-xs text-gray-500",children:"분석 중..."})]}):e.jsxs(e.Fragment,{children:[h.type&&!h.isUser&&e.jsx(ee,{variant:"secondary",className:"mb-2 text-xs",children:h.type==="product-generation"?"제품 생성":h.type==="tips"?"운영 팁":"일반"}),e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:h.content}),e.jsx("p",{className:`text-xs mt-2 ${h.isUser?"text-blue-100":"text-gray-500"}`,children:K(h.timestamp)})]})})})]})},h.id))})}),e.jsxs("div",{className:"flex-shrink-0 p-4 border-t bg-gray-50",children:[k&&e.jsxs("div",{className:"mb-3 p-3 bg-white rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"첨부된 이미지:"}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>{C(null),y(null),c.current&&(c.current.value="")},children:"제거"})]}),e.jsx("img",{src:k,alt:"업로드된 이미지",className:"max-w-32 max-h-32 object-cover rounded"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(oe,{value:a,onChange:h=>l(h.target.value),onKeyPress:$,placeholder:"제품 생성 요청, 운영 질문, 개선 아이디어 등을 입력하세요...",disabled:t,className:"min-h-[60px] resize-none",rows:2}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"file",ref:c,onChange:P,accept:"image/*",className:"hidden"}),e.jsx(N,{variant:"outline",size:"icon",onClick:()=>{var h;return(h=c.current)==null?void 0:h.click()},disabled:t,title:"이미지 업로드",children:e.jsx(Se,{className:"h-4 w-4"})}),e.jsxs(N,{onClick:O,disabled:!a.trim()&&!f||t,className:"flex-1 bg-amber-500 hover:bg-amber-600",children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),t?"처리 중...":"전송"]})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"AI가 생성한 정보입니다. 실제 적용 전 검토가 필요합니다."})]})]})}function Zs(){const{isAdmin:v,loading:s,adminUser:i}=vs(),{notices:a,loading:l,loadNotices:t,createNotice:m,updateNotice:f,deleteNotice:C,togglePin:k}=Es(),{products:y,loading:x,loadProducts:c,createProduct:g,updateProduct:p,deleteProduct:P,togglePublishStatus:A}=As(),[O,L]=o.useState(""),[$,J]=o.useState(!1),[K,h]=o.useState(null),[r,d]=o.useState(!1),[b,S]=o.useState(null),[U,W]=o.useState(!1),[u,j]=o.useState([]),[E,I]=o.useState([]),[T,H]=o.useState(!1),[te,ae]=o.useState(!1),[R,ue]=o.useState({totalProducts:0,totalUsers:0,monthlyOrders:0,monthlyRevenue:0});o.useEffect(()=>{v&&!s&&(t(),c(),Ye(),Xe(),We())},[v,s,t,c]);const Ye=async()=>{H(!0);try{const n=await fetch("/api/admin/users.php",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(n.ok){const G=await n.json();j(G.users||[])}}catch(n){console.error("사용자 데이터 로딩 실패:",n)}finally{H(!1)}},Xe=async()=>{ae(!0);try{const n=await fetch("/api/admin/orders.php",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(n.ok){const G=await n.json();I(G.orders||[])}}catch(n){console.error("주문 데이터 로딩 실패:",n)}finally{ae(!1)}},We=async()=>{try{const n=await fetch("/api/admin/stats.php",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(n.ok){const G=await n.json();ue({totalProducts:G.totalProducts||0,totalUsers:G.totalUsers||0,monthlyOrders:G.monthlyOrders||0,monthlyRevenue:G.monthlyRevenue||0})}}catch(n){console.error("통계 데이터 로딩 실패:",n)}};if(console.log("🏠 AdminPage render:",{isAdmin:v,adminLoading:s,adminUser:!!i}),s)return console.log("⏳ AdminPage: showing loading state"),e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"관리자 권한을 확인 중..."})]})});if(!v)return console.log("🚫 AdminPage: not admin, redirecting to home"),e.jsx(Ss,{to:"/",replace:!0});console.log("✅ AdminPage: admin verified, showing admin dashboard");const Qe=n=>{h(n),J(!0)},Ze=()=>{h(null),J(!0)},es=async n=>K?await f(K.id,n):await m(n),ss=async n=>{window.confirm("정말로 이 공지사항을 삭제하시겠습니까?")&&await C(n)},ts=n=>{S(n),d(!0)},as=()=>{S(null),d(!0)},rs=async n=>b?await p(b.id,n):await g(n),ns=async n=>{window.confirm("정말로 이 제품을 삭제하시겠습니까?")&&await P(n)},re=n=>new Date(n).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}),is=n=>{switch(n){case"completed":return"default";case"cancelled":return"destructive";case"pending":case"processing":return"secondary";default:return"outline"}},ls=n=>{switch(n){case"pending":return"대기중";case"processing":return"처리중";case"completed":return"완료";case"cancelled":return"취소";default:return n}};return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("nav",{className:"mb-8 animate-fade-in-up",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(_s,{to:"/",className:"hover:text-yellow-600 transition-colors",children:"홈"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-foreground",children:"관리자"})]})}),e.jsxs("div",{className:"mb-8 animate-fade-in-up",children:[e.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"관리자 대시보드"}),e.jsx("p",{className:"text-muted-foreground",children:"시스템 관리 및 모니터링 도구"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(q,{children:e.jsxs(M,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"총 제품"}),e.jsx("p",{className:"text-2xl font-bold",children:R.totalProducts})]}),e.jsx(je,{className:"w-8 h-8 text-yellow-600"})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(le,{className:"w-4 h-4 text-green-500 mr-1"}),e.jsx("span",{className:"text-sm text-green-500",children:"+12.5%"})]})]})}),e.jsx(q,{children:e.jsxs(M,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"총 사용자"}),e.jsx("p",{className:"text-2xl font-bold",children:R.totalUsers.toLocaleString()})]}),e.jsx(fe,{className:"w-8 h-8 text-yellow-600"})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(le,{className:"w-4 h-4 text-green-500 mr-1"}),e.jsx("span",{className:"text-sm text-green-500",children:"+8.2%"})]})]})}),e.jsx(q,{children:e.jsxs(M,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"월간 주문"}),e.jsx("p",{className:"text-2xl font-bold",children:R.monthlyOrders})]}),e.jsx(Pe,{className:"w-8 h-8 text-yellow-600"})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(Ps,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsx("span",{className:"text-sm text-red-500",children:"-3.1%"})]})]})}),e.jsx(q,{children:e.jsxs(M,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"월간 매출"}),e.jsxs("p",{className:"text-2xl font-bold",children:["₩",(R.monthlyRevenue/1e6).toFixed(1),"M"]})]}),e.jsx(Cs,{className:"w-8 h-8 text-yellow-600"})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(le,{className:"w-4 h-4 text-green-500 mr-1"}),e.jsx("span",{className:"text-sm text-green-500",children:"+15.3%"})]})]})})]}),e.jsxs(bs,{defaultValue:"notices",className:"w-full",children:[e.jsxs(ws,{className:"grid w-full grid-cols-6",children:[e.jsxs(Q,{value:"notices",className:"flex items-center gap-2",children:[e.jsx(ks,{className:"w-4 h-4"}),"공지사항"]}),e.jsxs(Q,{value:"products",className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4"}),"제품 관리"]}),e.jsxs(Q,{value:"users",className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4"}),"사용자 관리"]}),e.jsxs(Q,{value:"orders",className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4"}),"주문 관리"]}),e.jsxs(Q,{value:"analytics",className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),"분석"]}),e.jsxs(Q,{value:"ai-assistant",className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),"AI 어시스턴트"]})]}),e.jsx(Z,{value:"notices",className:"space-y-6",children:e.jsxs(q,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Y,{children:"공지사항 관리"}),e.jsxs(N,{onClick:Ze,className:"bg-amber-600 hover:bg-amber-700",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"새 공지사항 작성"]})]})}),e.jsxs(M,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(F,{placeholder:"공지사항 검색...",value:O,onChange:n=>L(n.target.value),className:"pl-10"})]}),e.jsxs(N,{variant:"outline",children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"필터"]})]}),l?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"공지사항을 불러오는 중..."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"제목"}),e.jsx("th",{className:"text-left py-2",children:"카테고리"}),e.jsx("th",{className:"text-left py-2",children:"작성자"}),e.jsx("th",{className:"text-left py-2",children:"작성일"}),e.jsx("th",{className:"text-left py-2",children:"조회수"}),e.jsx("th",{className:"text-left py-2",children:"상태"}),e.jsx("th",{className:"text-left py-2",children:"작업"})]})}),e.jsx("tbody",{children:a.map(n=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[n.isPinned&&e.jsx(Ee,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"font-medium max-w-xs truncate",children:n.title})]})}),e.jsx("td",{className:"py-3",children:e.jsx(ee,{variant:"outline",children:n.category})}),e.jsx("td",{className:"py-3 text-muted-foreground",children:n.author}),e.jsx("td",{className:"py-3 text-muted-foreground",children:re(n.createdAt)}),e.jsx("td",{className:"py-3 text-muted-foreground",children:n.views}),e.jsx("td",{className:"py-3",children:e.jsx(ee,{variant:n.isPinned?"default":"secondary",children:n.isPinned?"고정됨":"일반"})}),e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{size:"sm",variant:"outline",onClick:()=>k(n.id),title:n.isPinned?"고정 해제":"상단 고정",children:e.jsx(Ee,{className:`w-4 h-4 ${n.isPinned?"fill-current":""}`})}),e.jsx(N,{size:"sm",variant:"outline",onClick:()=>Qe(n),children:e.jsx(ne,{className:"w-4 h-4"})}),e.jsx(N,{size:"sm",variant:"outline",onClick:()=>ss(n.id),children:e.jsx(Ue,{className:"w-4 h-4"})})]})})]},n.id))})]})})]})]})}),e.jsx(Z,{value:"products",className:"space-y-6",children:e.jsxs(q,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Y,{children:"제품 관리"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{onClick:()=>W(!0),className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"AI 자동 생성"]}),e.jsxs(N,{onClick:as,className:"bg-yellow-400 hover:bg-yellow-500 text-gray-900",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"수동 추가"]})]})]})}),e.jsxs(M,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(F,{placeholder:"제품 검색...",value:O,onChange:n=>L(n.target.value),className:"pl-10"})]}),e.jsxs(N,{variant:"outline",children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"필터"]})]}),x?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"제품을 불러오는 중..."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"제품명"}),e.jsx("th",{className:"text-left py-2",children:"SKU"}),e.jsx("th",{className:"text-left py-2",children:"가격"}),e.jsx("th",{className:"text-left py-2",children:"재고"}),e.jsx("th",{className:"text-left py-2",children:"상태"}),e.jsx("th",{className:"text-left py-2",children:"작업"})]})}),e.jsx("tbody",{children:y.map(n=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-3 font-medium max-w-xs truncate",children:n.name}),e.jsx("td",{className:"py-3 text-muted-foreground",children:n.sku}),e.jsxs("td",{className:"py-3",children:["₩",n.price.toLocaleString()]}),e.jsxs("td",{className:"py-3",children:[n.stock_quantity,"개"]}),e.jsx("td",{className:"py-3",children:e.jsx(ee,{variant:n.is_published?"default":"secondary",children:n.is_published?"발행됨":"초안"})}),e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{size:"sm",variant:"outline",onClick:()=>A(n.id),title:n.is_published?"발행 취소":"발행",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx(N,{size:"sm",variant:"outline",onClick:()=>ts(n),children:e.jsx(ne,{className:"w-4 h-4"})}),e.jsx(N,{size:"sm",variant:"outline",onClick:()=>ns(n.id),children:e.jsx(Ue,{className:"w-4 h-4"})})]})})]},n.id))})]})})]})]})}),e.jsx(Z,{value:"users",className:"space-y-6",children:e.jsxs(q,{children:[e.jsx(V,{children:e.jsx(Y,{children:"사용자 관리"})}),e.jsx(M,{children:T?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"사용자 데이터를 불러오는 중..."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"이름"}),e.jsx("th",{className:"text-left py-2",children:"이메일"}),e.jsx("th",{className:"text-left py-2",children:"가입일"}),e.jsx("th",{className:"text-left py-2",children:"마지막 로그인"}),e.jsx("th",{className:"text-left py-2",children:"상태"}),e.jsx("th",{className:"text-left py-2",children:"작업"})]})}),e.jsx("tbody",{children:u.length>0?u.map(n=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-3 font-medium",children:n.name||"이름 없음"}),e.jsx("td",{className:"py-3 text-muted-foreground",children:n.email}),e.jsx("td",{className:"py-3",children:re(n.created_at)}),e.jsx("td",{className:"py-3",children:n.last_login?re(n.last_login):"없음"}),e.jsx("td",{className:"py-3",children:e.jsx(ee,{variant:n.is_active?"default":"secondary",children:n.is_active?"활성":"비활성"})}),e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{size:"sm",variant:"outline",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx(N,{size:"sm",variant:"outline",children:e.jsx(ne,{className:"w-4 h-4"})})]})})]},n.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"등록된 사용자가 없습니다."})})})]})})})]})}),e.jsx(Z,{value:"orders",className:"space-y-6",children:e.jsxs(q,{children:[e.jsx(V,{children:e.jsx(Y,{children:"주문 관리"})}),e.jsx(M,{children:te?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"주문 데이터를 불러오는 중..."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"주문번호"}),e.jsx("th",{className:"text-left py-2",children:"고객"}),e.jsx("th",{className:"text-left py-2",children:"총액"}),e.jsx("th",{className:"text-left py-2",children:"상태"}),e.jsx("th",{className:"text-left py-2",children:"주문일"}),e.jsx("th",{className:"text-left py-2",children:"작업"})]})}),e.jsx("tbody",{children:E.length>0?E.map(n=>e.jsxs("tr",{className:"border-b",children:[e.jsxs("td",{className:"py-3 font-medium",children:["#",n.id]}),e.jsx("td",{className:"py-3",children:n.customer_email||n.customer_name||"고객 정보 없음"}),e.jsxs("td",{className:"py-3",children:["₩",n.total_amount.toLocaleString()]}),e.jsx("td",{className:"py-3",children:e.jsx(ee,{variant:is(n.status),children:ls(n.status)})}),e.jsx("td",{className:"py-3",children:re(n.created_at)}),e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{size:"sm",variant:"outline",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx(N,{size:"sm",variant:"outline",children:e.jsx(ne,{className:"w-4 h-4"})})]})})]},n.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"주문 내역이 없습니다."})})})]})})})]})}),e.jsxs(Z,{value:"analytics",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(q,{children:[e.jsx(V,{children:e.jsx(Y,{children:"매출 분석"})}),e.jsx(M,{children:e.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ae,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"매출 차트가 여기에 표시됩니다"})]})})})]}),e.jsxs(q,{children:[e.jsx(V,{children:e.jsx(Y,{children:"인기 제품"})}),e.jsx(M,{children:e.jsx("div",{className:"space-y-4",children:y.slice(0,3).map((n,G)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold text-yellow-600",children:G+1})}),e.jsx("span",{className:"font-medium",children:n.name})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[n.stock_quantity,"개 재고"]})]},n.id))})})]})]}),e.jsxs(q,{children:[e.jsx(V,{children:e.jsx(Y,{children:"최근 활동"})}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"새로운 주문 #1005가 접수되었습니다"}),e.jsx("span",{className:"text-xs text-muted-foreground ml-auto",children:"2분 전"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:'제품 "AGV 캐스터 AC-100"의 재고가 업데이트되었습니다'}),e.jsx("span",{className:"text-xs text-muted-foreground ml-auto",children:"15분 전"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"새로운 사용자가 가입했습니다"}),e.jsx("span",{className:"text-xs text-muted-foreground ml-auto",children:"1시간 전"})]})]})})]})]}),e.jsx(Z,{value:"ai-assistant",className:"space-y-6",children:e.jsx(q,{className:"h-[600px]",children:e.jsx(Gs,{className:"h-full"})})})]}),e.jsx(Fs,{isOpen:$,onClose:()=>{J(!1),h(null)},onSave:es,notice:K,loading:l}),e.jsx(Ls,{isOpen:r,onClose:()=>{d(!1),S(null)},onSave:rs,product:b,loading:x}),e.jsx($s,{isOpen:U,onClose:()=>W(!1),onProductCreated:()=>{c(),W(!1)}})]})})}export{Zs as AdminPage};
