import{j as e}from"./ui-vendor-hOSTw39_.js";import{r,L as S}from"./react-vendor-CE1B3BJh.js";import{k,I as D,f as d,C as m,a as x,ap as p,af as I,B as N,R as L,E,ag as $,ah as F}from"./index-Zig8Iyx9.js";const M=()=>{const[h,P]=r.useState([]),[g,u]=r.useState([]),[f,b]=r.useState(!0),[c,A]=r.useState(""),[l,n]=r.useState(1),[i,R]=r.useState("전체"),j=10;r.useEffect(()=>{(async()=>{try{const t=await(await fetch("/data/notices.json")).json();P(t),u(t),b(!1)}catch(a){console.error("Error loading notices:",a),b(!1)}})()},[]),r.useEffect(()=>{let s=h;i!=="전체"&&(s=s.filter(a=>a.category===i)),c&&(s=s.filter(a=>a.title.toLowerCase().includes(c.toLowerCase())||a.content.toLowerCase().includes(c.toLowerCase()))),u(s),n(1)},[h,c,i]);const T=["전체",...Array.from(new Set(h.map(s=>s.category)))],z=g.filter(s=>s.isPinned),w=g.filter(s=>!s.isPinned),o=Math.ceil(w.length/j),y=(l-1)*j,B=w.slice(y,y+j),v=s=>new Date(s).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}),C=s=>({제품:"bg-blue-100 text-blue-800",공지:"bg-red-100 text-red-800",사업:"bg-green-100 text-green-800",시스템:"bg-purple-100 text-purple-800",인증:"bg-yellow-100 text-yellow-800",기술:"bg-indigo-100 text-indigo-800",행사:"bg-pink-100 text-pink-800"})[s]||"bg-gray-100 text-gray-800";return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"공지사항"}),e.jsx("p",{className:"text-gray-600 text-lg max-w-2xl mx-auto",children:"JP CASTER의 최신 소식과 중요한 공지사항을 확인하세요"})]})})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(D,{type:"text",placeholder:"제목 또는 내용으로 검색하세요...",value:c,onChange:s=>A(s.target.value),className:"pl-10 h-12"})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:T.map(s=>e.jsx(d,{variant:i===s?"default":"outline",size:"sm",onClick:()=>R(s),className:"h-12",children:s},s))})]})}),e.jsxs("div",{className:"space-y-4",children:[f?[...Array(5)].map((s,a)=>e.jsx(m,{className:"border-0 shadow-sm",children:e.jsxs(x,{className:"p-6",children:[e.jsx(p,{className:"h-6 w-3/4 mb-4"}),e.jsx(p,{className:"h-4 w-full mb-2"}),e.jsx(p,{className:"h-4 w-1/2"})]})},a)):e.jsxs(e.Fragment,{children:[z.map(s=>e.jsx(m,{className:"border-yellow-200 bg-yellow-50 shadow-sm hover:shadow-md transition-shadow",children:e.jsx(x,{className:"p-6",children:e.jsx(S,{to:`/notices/${s.id}`,className:"group",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(I,{className:"w-4 h-4 text-yellow-600"}),e.jsx(N,{className:C(s.category),children:s.category}),e.jsx(N,{variant:"secondary",className:"bg-yellow-200 text-yellow-800",children:"공지"})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-primary transition-colors mb-2",children:s.title}),e.jsxs("p",{className:"text-gray-600 text-sm line-clamp-2 mb-3",children:[s.content.replace(/\n/g," ").substring(0,120),"..."]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:v(s.createdAt)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{children:s.views.toLocaleString()})]}),e.jsxs("span",{children:["작성자: ",s.author]})]})]}),s.thumbnail&&e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0",children:e.jsx("img",{src:s.thumbnail,alt:"",className:"w-full h-full object-cover",onError:a=>{a.currentTarget.src="/images/placeholder.svg"}})})]})})})},`pinned-${s.id}`)),B.map(s=>e.jsx(m,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:e.jsx(x,{className:"p-6",children:e.jsx(S,{to:`/notices/${s.id}`,className:"group",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-3 mb-3",children:e.jsx(N,{className:C(s.category),children:s.category})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-primary transition-colors mb-2",children:s.title}),e.jsxs("p",{className:"text-gray-600 text-sm line-clamp-2 mb-3",children:[s.content.replace(/\n/g," ").substring(0,120),"..."]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:v(s.createdAt)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{children:s.views.toLocaleString()})]}),e.jsxs("span",{children:["작성자: ",s.author]})]})]}),s.thumbnail&&e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0",children:e.jsx("img",{src:s.thumbnail,alt:"",className:"w-full h-full object-cover",onError:a=>{a.currentTarget.src="/images/placeholder.svg"}})})]})})})},s.id))]}),!f&&g.length===0&&e.jsx(m,{className:"border-0 shadow-sm",children:e.jsxs(x,{className:"p-12 text-center",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(k,{className:"w-12 h-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"검색 결과가 없습니다"}),e.jsx("p",{className:"text-gray-500",children:"다른 검색어나 카테고리를 시도해 보세요"})]})})]}),o>1&&e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-8",children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>n(l-1),disabled:l===1,children:[e.jsx($,{className:"w-4 h-4"}),"이전"]}),[...Array(o)].map((s,a)=>{const t=a+1;return t===1||t===o||t>=l-2&&t<=l+2?e.jsx(d,{variant:l===t?"default":"outline",size:"sm",onClick:()=>n(t),children:t},t):t===l-3||t===l+3?e.jsx("span",{className:"px-2",children:"..."},t):null}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>n(l+1),disabled:l===o,children:["다음",e.jsx(F,{className:"w-4 h-4"})]})]})]})]})};export{M as default};
