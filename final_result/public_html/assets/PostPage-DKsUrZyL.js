import{j as s}from"./ui-vendor-CPG2pbg2.js";import{r as O,u as A,f as de}from"./react-vendor-CUUEtbzt.js";import{c as K,a3 as B,h as q,a6 as U,C as W,a as C,T as F,f as j,S as oe,O as J,ae as Z,d as G,a7 as ee,a1 as le,B as ue,a2 as me,aj as he,ah as E,ai as fe}from"./index-CSp23eor.js";import{a as L,t as p,c as T,g as $,d as xe,f as te,e as ge,k as ae}from"./ko-BhTk4Nb5.js";import{H as Q}from"./heart-Dzr2dPZn.js";import{S as we}from"./square-pen-w9ZVmRCc.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=K("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=K("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);function _(t,e){var l,o,h,u;const a=L(),r=(e==null?void 0:e.weekStartsOn)??((o=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:o.weekStartsOn)??a.weekStartsOn??((u=(h=a.locale)==null?void 0:h.options)==null?void 0:u.weekStartsOn)??0,n=p(t),c=n.getDay(),m=(c<r?7:0)+c-r;return n.setDate(n.getDate()-m),n.setHours(0,0,0,0),n}function H(t){return _(t,{weekStartsOn:1})}function se(t){const e=p(t),a=e.getFullYear(),r=T(t,0);r.setFullYear(a+1,0,4),r.setHours(0,0,0,0);const n=H(r),c=T(t,0);c.setFullYear(a,0,4),c.setHours(0,0,0,0);const m=H(c);return e.getTime()>=n.getTime()?a+1:e.getTime()>=m.getTime()?a:a-1}function R(t){const e=p(t);return e.setHours(0,0,0,0),e}function je(t,e){const a=R(t),r=R(e),n=+a-$(a),c=+r-$(r);return Math.round((n-c)/xe)}function be(t){const e=se(t),a=T(t,0);return a.setFullYear(e,0,4),a.setHours(0,0,0,0),H(a)}function Ne(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ve(t){if(!Ne(t)&&typeof t!="number")return!1;const e=p(t);return!isNaN(Number(e))}function pe(t){const e=p(t),a=T(t,0);return a.setFullYear(e.getFullYear(),0,1),a.setHours(0,0,0,0),a}function ke(t){const e=p(t);return je(e,pe(e))+1}function Oe(t){const e=p(t),a=+H(e)-+be(e);return Math.round(a/te)+1}function ne(t,e){var u,g,b,N;const a=p(t),r=a.getFullYear(),n=L(),c=(e==null?void 0:e.firstWeekContainsDate)??((g=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:g.firstWeekContainsDate)??n.firstWeekContainsDate??((N=(b=n.locale)==null?void 0:b.options)==null?void 0:N.firstWeekContainsDate)??1,m=T(t,0);m.setFullYear(r+1,0,c),m.setHours(0,0,0,0);const l=_(m,e),o=T(t,0);o.setFullYear(r,0,c),o.setHours(0,0,0,0);const h=_(o,e);return a.getTime()>=l.getTime()?r+1:a.getTime()>=h.getTime()?r:r-1}function Se(t,e){var l,o,h,u;const a=L(),r=(e==null?void 0:e.firstWeekContainsDate)??((o=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:o.firstWeekContainsDate)??a.firstWeekContainsDate??((u=(h=a.locale)==null?void 0:h.options)==null?void 0:u.firstWeekContainsDate)??1,n=ne(t,e),c=T(t,0);return c.setFullYear(n,0,r),c.setHours(0,0,0,0),_(c,e)}function De(t,e){const a=p(t),r=+_(a,e)-+Se(a,e);return Math.round(r/te)+1}function d(t,e){const a=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return a+r}const M={y(t,e){const a=t.getFullYear(),r=a>0?a:1-a;return d(e==="yy"?r%100:r,e.length)},M(t,e){const a=t.getMonth();return e==="M"?String(a+1):d(a+1,2)},d(t,e){return d(t.getDate(),e.length)},a(t,e){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(t,e){return d(t.getHours()%12||12,e.length)},H(t,e){return d(t.getHours(),e.length)},m(t,e){return d(t.getMinutes(),e.length)},s(t,e){return d(t.getSeconds(),e.length)},S(t,e){const a=e.length,r=t.getMilliseconds(),n=Math.trunc(r*Math.pow(10,a-3));return d(n,e.length)}},Y={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},I={G:function(t,e,a){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})}},y:function(t,e,a){if(e==="yo"){const r=t.getFullYear(),n=r>0?r:1-r;return a.ordinalNumber(n,{unit:"year"})}return M.y(t,e)},Y:function(t,e,a,r){const n=ne(t,r),c=n>0?n:1-n;if(e==="YY"){const m=c%100;return d(m,2)}return e==="Yo"?a.ordinalNumber(c,{unit:"year"}):d(c,e.length)},R:function(t,e){const a=se(t);return d(a,e.length)},u:function(t,e){const a=t.getFullYear();return d(a,e.length)},Q:function(t,e,a){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return d(r,2);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,a){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return d(r,2);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,a){const r=t.getMonth();switch(e){case"M":case"MM":return M.M(t,e);case"Mo":return a.ordinalNumber(r+1,{unit:"month"});case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,a){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return d(r+1,2);case"Lo":return a.ordinalNumber(r+1,{unit:"month"});case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,a,r){const n=De(t,r);return e==="wo"?a.ordinalNumber(n,{unit:"week"}):d(n,e.length)},I:function(t,e,a){const r=Oe(t);return e==="Io"?a.ordinalNumber(r,{unit:"week"}):d(r,e.length)},d:function(t,e,a){return e==="do"?a.ordinalNumber(t.getDate(),{unit:"date"}):M.d(t,e)},D:function(t,e,a){const r=ke(t);return e==="Do"?a.ordinalNumber(r,{unit:"dayOfYear"}):d(r,e.length)},E:function(t,e,a){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,a,r){const n=t.getDay(),c=(n-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(c);case"ee":return d(c,2);case"eo":return a.ordinalNumber(c,{unit:"day"});case"eee":return a.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(n,{width:"short",context:"formatting"});case"eeee":default:return a.day(n,{width:"wide",context:"formatting"})}},c:function(t,e,a,r){const n=t.getDay(),c=(n-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(c);case"cc":return d(c,e.length);case"co":return a.ordinalNumber(c,{unit:"day"});case"ccc":return a.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(n,{width:"narrow",context:"standalone"});case"cccccc":return a.day(n,{width:"short",context:"standalone"});case"cccc":default:return a.day(n,{width:"wide",context:"standalone"})}},i:function(t,e,a){const r=t.getDay(),n=r===0?7:r;switch(e){case"i":return String(n);case"ii":return d(n,e.length);case"io":return a.ordinalNumber(n,{unit:"day"});case"iii":return a.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(r,{width:"short",context:"formatting"});case"iiii":default:return a.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,a){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,e,a){const r=t.getHours();let n;switch(r===12?n=Y.noon:r===0?n=Y.midnight:n=r/12>=1?"pm":"am",e){case"b":case"bb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,e,a){const r=t.getHours();let n;switch(r>=17?n=Y.evening:r>=12?n=Y.afternoon:r>=4?n=Y.morning:n=Y.night,e){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,e,a){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),a.ordinalNumber(r,{unit:"hour"})}return M.h(t,e)},H:function(t,e,a){return e==="Ho"?a.ordinalNumber(t.getHours(),{unit:"hour"}):M.H(t,e)},K:function(t,e,a){const r=t.getHours()%12;return e==="Ko"?a.ordinalNumber(r,{unit:"hour"}):d(r,e.length)},k:function(t,e,a){let r=t.getHours();return r===0&&(r=24),e==="ko"?a.ordinalNumber(r,{unit:"hour"}):d(r,e.length)},m:function(t,e,a){return e==="mo"?a.ordinalNumber(t.getMinutes(),{unit:"minute"}):M.m(t,e)},s:function(t,e,a){return e==="so"?a.ordinalNumber(t.getSeconds(),{unit:"second"}):M.s(t,e)},S:function(t,e){return M.S(t,e)},X:function(t,e,a){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return V(r);case"XXXX":case"XX":return P(r);case"XXXXX":case"XXX":default:return P(r,":")}},x:function(t,e,a){const r=t.getTimezoneOffset();switch(e){case"x":return V(r);case"xxxx":case"xx":return P(r);case"xxxxx":case"xxx":default:return P(r,":")}},O:function(t,e,a){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+X(r,":");case"OOOO":default:return"GMT"+P(r,":")}},z:function(t,e,a){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+X(r,":");case"zzzz":default:return"GMT"+P(r,":")}},t:function(t,e,a){const r=Math.trunc(t.getTime()/1e3);return d(r,e.length)},T:function(t,e,a){const r=t.getTime();return d(r,e.length)}};function X(t,e=""){const a=t>0?"-":"+",r=Math.abs(t),n=Math.trunc(r/60),c=r%60;return c===0?a+String(n):a+String(n)+e+d(c,2)}function V(t,e){return t%60===0?(t>0?"-":"+")+d(Math.abs(t)/60,2):P(t,e)}function P(t,e=""){const a=t>0?"-":"+",r=Math.abs(t),n=d(Math.trunc(r/60),2),c=d(r%60,2);return a+n+e+c}const z=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ie=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Me=(t,e)=>{const a=t.match(/(P+)(p+)?/)||[],r=a[1],n=a[2];if(!n)return z(t,e);let c;switch(r){case"P":c=e.dateTime({width:"short"});break;case"PP":c=e.dateTime({width:"medium"});break;case"PPP":c=e.dateTime({width:"long"});break;case"PPPP":default:c=e.dateTime({width:"full"});break}return c.replace("{{date}}",z(r,e)).replace("{{time}}",ie(n,e))},Pe={p:ie,P:Me},Te=/^D+$/,Ye=/^Y+$/,Ee=["D","DD","YY","YYYY"];function _e(t){return Te.test(t)}function We(t){return Ye.test(t)}function Ce(t,e,a){const r=He(t,e,a);if(console.warn(r),Ee.includes(t))throw new RangeError(r)}function He(t,e,a){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Le=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,qe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Be=/^'([^]*?)'?$/,Fe=/''/g,Ge=/[a-zA-Z]/;function ce(t,e,a){var u,g,b,N,S,f,v,k;const r=L(),n=(a==null?void 0:a.locale)??r.locale??ge,c=(a==null?void 0:a.firstWeekContainsDate)??((g=(u=a==null?void 0:a.locale)==null?void 0:u.options)==null?void 0:g.firstWeekContainsDate)??r.firstWeekContainsDate??((N=(b=r.locale)==null?void 0:b.options)==null?void 0:N.firstWeekContainsDate)??1,m=(a==null?void 0:a.weekStartsOn)??((f=(S=a==null?void 0:a.locale)==null?void 0:S.options)==null?void 0:f.weekStartsOn)??r.weekStartsOn??((k=(v=r.locale)==null?void 0:v.options)==null?void 0:k.weekStartsOn)??0,l=p(t);if(!ve(l))throw new RangeError("Invalid time value");let o=e.match(qe).map(x=>{const i=x[0];if(i==="p"||i==="P"){const w=Pe[i];return w(x,n.formatLong)}return x}).join("").match(Le).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const i=x[0];if(i==="'")return{isToken:!1,value:$e(x)};if(I[i])return{isToken:!0,value:x};if(i.match(Ge))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return{isToken:!1,value:x}});n.localize.preprocessor&&(o=n.localize.preprocessor(l,o));const h={firstWeekContainsDate:c,weekStartsOn:m,locale:n};return o.map(x=>{if(!x.isToken)return x.value;const i=x.value;(!(a!=null&&a.useAdditionalWeekYearTokens)&&We(i)||!(a!=null&&a.useAdditionalDayOfYearTokens)&&_e(i))&&Ce(i,e,String(t));const w=I[i[0]];return w(l,i,n.localize,h)}).join("")}function $e(t){const e=t.match(Be);return e?e[1].replace(Fe,"'"):t}function Qe({comments:t,onCommentCreate:e,onCommentDelete:a}){const{user:r}=B(),[n,c]=O.useState(""),[m,l]=O.useState(null),[o,h]=O.useState(""),[u,g]=O.useState(!1),b=i=>ce(new Date(i),"yyyy년 MM월 dd일 HH:mm",{locale:ae}),N=async i=>{if(i.preventDefault(),!(!n.trim()||u)){g(!0);try{await(e==null?void 0:e(n)),c("")}finally{g(!1)}}},S=async(i,w)=>{if(i.preventDefault(),!(!o.trim()||u)){g(!0);try{await(e==null?void 0:e(o,w)),h(""),l(null)}finally{g(!1)}}},f=i=>{window.confirm("정말로 이 댓글을 삭제하시겠습니까?")&&(a==null||a(i))},v=i=>{var w;return i.user_id===(r==null?void 0:r.id)||((w=r==null?void 0:r.user_metadata)==null?void 0:w.role)==="admin"},k=(i,w=!1)=>i.status==="deleted"?s.jsx("div",{className:`${w?"ml-8":""} py-4`,children:s.jsx("div",{className:"text-gray-500 italic",children:"삭제된 댓글입니다."})},i.id):s.jsxs("div",{className:`${w?"ml-8":""}`,children:[s.jsx(W,{className:"mb-4",children:s.jsxs(C,{className:"pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[i.is_admin_reply?s.jsx(oe,{className:"h-4 w-4 text-red-500"}):s.jsx(J,{className:"h-4 w-4"}),s.jsx("span",{className:i.is_admin_reply?"text-red-600 font-medium":"",children:i.user_id?i.is_admin_reply?"관리자":"작성자":i.author_name||"익명"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Z,{className:"h-4 w-4"}),s.jsx("span",{children:b(i.created_at)})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!w&&s.jsxs(j,{variant:"ghost",size:"sm",onClick:()=>l(m===i.id?null:i.id),children:[s.jsx(ye,{className:"h-4 w-4 mr-1"}),"답글"]}),v(i)&&s.jsx(j,{variant:"ghost",size:"sm",onClick:()=>f(i.id),className:"text-red-600 hover:text-red-700",children:s.jsx(re,{className:"h-4 w-4"})})]})]}),s.jsx("div",{className:"text-gray-900 whitespace-pre-wrap mb-3",children:i.content}),m===i.id&&s.jsx("div",{className:"mt-4 pt-4 border-t",children:s.jsxs("form",{onSubmit:D=>S(D,i.id),children:[s.jsx(F,{placeholder:"답글을 작성하세요...",value:o,onChange:D=>h(D.target.value),className:"mb-3",rows:3}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(j,{type:"submit",size:"sm",disabled:!o.trim()||u,children:u?"작성 중...":"답글 작성"}),s.jsx(j,{type:"button",variant:"outline",size:"sm",onClick:()=>{l(null),h("")},children:"취소"})]})]})})]})}),i.replies&&i.replies.length>0&&s.jsx("div",{className:"ml-8 space-y-2",children:i.replies.map(D=>k(D,!0))})]},i.id),x=t.filter(i=>!i.parent_id);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(q,{className:"h-5 w-5 text-gray-600"}),s.jsxs("h3",{className:"text-lg font-semibold",children:["댓글 (",t.length,")"]})]}),s.jsx(U,{}),s.jsx(W,{children:s.jsx(C,{className:"pt-6",children:s.jsxs("form",{onSubmit:N,children:[s.jsx(F,{placeholder:"댓글을 작성하세요...",value:n,onChange:i=>c(i.target.value),className:"mb-4",rows:4}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:r?"회원으로 댓글을 작성합니다.":"로그인 후 댓글을 작성할 수 있습니다."}),s.jsx(j,{type:"submit",disabled:!n.trim()||u||!r,children:u?"작성 중...":"댓글 작성"})]})]})})}),s.jsx("div",{className:"space-y-4",children:x.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(q,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h4",{className:"mt-4 text-lg font-medium text-gray-900",children:"댓글이 없습니다"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"첫 번째 댓글을 작성해보세요."})]}):x.map(i=>k(i))})]})}function Re({post:t,loading:e,onLike:a,onDelete:r,onCommentCreate:n,onCommentDelete:c}){var i,w,D;const m=A(),{user:l}=B(),[o,h]=O.useState(!1),u=t.user_id===(l==null?void 0:l.id)||((i=l==null?void 0:l.user_metadata)==null?void 0:i.role)==="admin",g=u,b=()=>{var y;m(`/board/${(y=t.board)==null?void 0:y.slug}`)},N=()=>{var y;m(`/board/${(y=t.board)==null?void 0:y.slug}/${t.id}/edit`)},S=async()=>{a&&(await a(),h(!o))},f=()=>{window.confirm("정말로 이 게시글을 삭제하시겠습니까?")&&(r==null||r())},v=y=>{switch(y){case"notice":return"공지";case"pinned":return"고정";default:return null}},k=y=>{switch(y){case"notice":return"destructive";case"pinned":return"secondary";default:return"outline"}},x=y=>ce(new Date(y),"yyyy년 MM월 dd일 HH:mm",{locale:ae});return e?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(j,{variant:"ghost",size:"sm",className:"animate-pulse",children:[s.jsx("div",{className:"h-4 w-4 bg-gray-200 rounded mr-2"}),s.jsx("div",{className:"h-4 w-16 bg-gray-200 rounded"})]}),s.jsxs(W,{className:"animate-pulse",children:[s.jsx(G,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-5 w-12 bg-gray-200 rounded"}),s.jsx("div",{className:"h-6 w-64 bg-gray-200 rounded"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"h-4 w-16 bg-gray-200 rounded"}),s.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"h-4 w-12 bg-gray-200 rounded"}),s.jsx("div",{className:"h-4 w-12 bg-gray-200 rounded"}),s.jsx("div",{className:"h-4 w-12 bg-gray-200 rounded"})]})]})]})}),s.jsx(C,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-4 w-full bg-gray-200 rounded"}),s.jsx("div",{className:"h-4 w-3/4 bg-gray-200 rounded"}),s.jsx("div",{className:"h-4 w-1/2 bg-gray-200 rounded"})]})})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(j,{variant:"ghost",size:"sm",onClick:b,children:[s.jsx(ee,{className:"h-4 w-4 mr-2"}),"목록으로"]}),s.jsxs(W,{children:[s.jsx(G,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.is_pinned&&s.jsx(le,{className:"h-4 w-4 text-red-500"}),v(t.post_type)&&s.jsx(ue,{variant:k(t.post_type),children:v(t.post_type)})]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 flex-1",children:t.title})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(J,{className:"h-4 w-4"}),s.jsx("span",{children:t.user_id?"회원":t.author_name||"익명"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Z,{className:"h-4 w-4"}),s.jsx("span",{children:x(t.created_at)})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(me,{className:"h-4 w-4"}),s.jsx("span",{children:t.views})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(q,{className:"h-4 w-4"}),s.jsx("span",{children:((w=t.comments)==null?void 0:w.length)||0})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Q,{className:`h-4 w-4 ${o?"text-red-500 fill-current":""}`}),s.jsx("span",{children:t.likes})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(j,{variant:"outline",size:"sm",onClick:S,className:`flex items-center gap-1 ${o?"text-red-500":""}`,children:[s.jsx(Q,{className:`h-4 w-4 ${o?"fill-current":""}`}),"좋아요 ",t.likes]})}),(u||g)&&s.jsxs("div",{className:"flex items-center gap-2",children:[u&&s.jsxs(j,{variant:"outline",size:"sm",onClick:N,children:[s.jsx(we,{className:"h-4 w-4 mr-1"}),"수정"]}),g&&s.jsxs(j,{variant:"outline",size:"sm",onClick:f,children:[s.jsx(re,{className:"h-4 w-4 mr-1"}),"삭제"]})]})]})]})}),s.jsx(U,{}),s.jsxs(C,{className:"pt-6",children:[s.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:t.content}}),t.attachments&&t.attachments.length>0&&s.jsxs("div",{className:"mt-8 pt-6 border-t",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"첨부파일"}),s.jsx("div",{className:"space-y-2",children:t.attachments.map(y=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[s.jsx(he,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:y.original_filename}),s.jsxs("div",{className:"text-sm text-gray-500",children:[Math.round(y.file_size/1024),"KB"]})]}),s.jsx(j,{size:"sm",variant:"outline",children:"다운로드"})]},y.id))})]})]})]}),((D=t.board)==null?void 0:D.settings.allow_comments)&&s.jsx(Qe,{comments:t.comments||[],onCommentCreate:n,onCommentDelete:c})]})}function Ue(){const{boardSlug:t,postId:e}=de(),a=A();B();const[r,n]=O.useState(null),[c,m]=O.useState(!0),[l,o]=O.useState(null);O.useEffect(()=>{h()},[e]);const h=async()=>{if(!e){o("게시글을 찾을 수 없습니다."),m(!1);return}try{m(!0),o(null);const f=await E.getPost(e);if(!f){o("게시글을 찾을 수 없습니다.");return}n(f)}catch(f){console.error("Post loading error:",f),o(f.message||"게시글을 불러오는데 실패했습니다.")}finally{m(!1)}},u=async()=>{if(r)try{await E.toggleLike(r.id),await h()}catch(f){console.error("Like toggle error:",f)}},g=async()=>{if(r)try{await E.deletePost(r.id),a(`/board/${t}`)}catch(f){console.error("Post delete error:",f)}},b=async(f,v)=>{if(r)try{await E.createComment({post_id:r.id,content:f,parent_id:v}),await h()}catch(k){console.error("Comment create error:",k)}},N=async f=>{try{await E.deleteComment(f),await h()}catch(v){console.error("Comment delete error:",v)}},S=()=>{a(`/board/${t}`)};return c?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(fe,{className:"mx-auto"})}):l||!r?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"오류 발생"}),s.jsx("p",{className:"text-gray-600 mb-6",children:l||"게시글을 찾을 수 없습니다."}),s.jsxs(j,{onClick:S,children:[s.jsx(ee,{className:"h-4 w-4 mr-2"}),"게시판으로 돌아가기"]})]})}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(Re,{post:r,loading:c,onLike:u,onDelete:g,onCommentCreate:b,onCommentDelete:N})})}export{Ue as default};
